<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MATRIX AI - BACCARAT PREDICTOR</title>
    <style>
        :root {
            --neon-green: #00ff41;
            --neon-red: #ff003c;
            --neon-blue: #00d4ff;
            --bg-dark: #0a0a0a;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--neon-green);
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }

        .header {
            text-shadow: 0 0 10px var(--neon-green);
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }

        .container {
            width: 100%;
            max-width: 500px;
            border: 2px solid var(--neon-green);
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
            border-radius: 10px;
        }

        .prediction-box {
            text-align: center;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px dashed var(--neon-green);
            background: rgba(0, 255, 65, 0.05);
        }

        #prediction-result {
            font-size: 40px;
            font-weight: bold;
            margin: 10px 0;
        }

        .input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .side-box {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn-main {
            padding: 15px;
            cursor: pointer;
            font-weight: bold;
            border: none;
            color: white;
            border-radius: 5px;
            transition: 0.3s;
        }

        .btn-p { background-color: #0044ff; box-shadow: 0 0 10px #0044ff; }
        .btn-b { background-color: #ff0000; box-shadow: 0 0 10px #ff0000; }

        select {
            background: #1a1a1a;
            color: white;
            border: 1px solid var(--neon-green);
            padding: 5px;
            font-size: 12px;
        }

        .history-log {
            margin-top: 20px;
            font-size: 14px;
            word-wrap: break-word;
            color: #888;
        }

        .status-bar {
            font-size: 12px;
            margin-top: 10px;
            color: yellow;
        }
    </style>
</head>
<body>

    <div class="header">▼ SYSTEM CORE: AI ANALYZER ▼</div>

    <div class="container">
        <!-- Khu vực hiển thị kết quả dự đoán -->
        <div class="prediction-box">
            <div>DỰ ĐOÁN TIẾP THEO:</div>
            <div id="prediction-result">CHỜ DỮ LIỆU...</div>
            <div id="confidence-level">Độ tin cậy: 0%</div>
        </div>

        <!-- Khu vực nhập liệu -->
        <div class="input-section">
            <!-- Bên Player -->
            <div class="side-box">
                <button class="btn-main btn-p" onclick="addData('P')">PLAYER (P)</button>
                <label>Rỗng: <select id="p_rong"><option value="Xanh">Xanh</option><option value="Đỏ">Đỏ</option></select></label>
                <label>Đặc: <select id="p_dac"><option value="Xanh">Xanh</option><option value="Đỏ">Đỏ</option></select></label>
                <label>Mưa: <select id="p_mua"><option value="Xanh">Xanh</option><option value="Đỏ">Đỏ</option></select></label>
            </div>

            <!-- Bên Banker -->
            <div class="side-box">
                <button class="btn-main btn-b" onclick="addData('B')">BANKER (B)</button>
                <label>Rỗng: <select id="b_rong"><option value="Đỏ">Đỏ</option><option value="Xanh">Xanh</option></select></label>
                <label>Đặc: <select id="b_dac"><option value="Đỏ">Đỏ</option><option value="Xanh">Xanh</option></select></label>
                <label>Mưa: <select id="b_mua"><option value="Đỏ">Đỏ</option><option value="Xanh">Xanh</option></select></label>
            </div>
        </div>

        <div class="status-bar" id="status">Trạng thái: Đang đợi nhập ít nhất 3 ván...</div>
        
        <div class="history-log" id="history">Lịch sử: </div>
        <button onclick="resetData()" style="margin-top:20px; background:none; color:grey; border:1px solid grey; cursor:pointer;">Reset System</button>
    </div>

    <script>
        let history = [];

        function addData(side) {
            // Lấy dữ liệu từ các ô chọn màu dưới chân mỗi nút
            let r, d, m;
            if(side === 'P') {
                r = document.getElementById('p_rong').value;
                d = document.getElementById('p_dac').value;
                m = document.getElementById('p_mua').value;
            } else {
                r = document.getElementById('b_rong').value;
                d = document.getElementById('b_dac').value;
                m = document.getElementById('b_mua').value;
            }

            history.push({side, r, d, m});
            updateUI();
            runAI();
        }

        function updateUI() {
            const histDiv = document.getElementById('history');
            let text = history.map(h => <span style="color:${h.side === 'P' ? '#0044ff' : '#ff0000'}">${h.side}</span>).join(" - ");
            histDiv.innerHTML = "Lịch sử: " + text;
        }

        function runAI() {
            if (history.length < 3) return;

            document.getElementById('status').innerText = "Trạng thái: AI Đang tính toán...";
            
            setTimeout(() => {
                let last = history[history.length - 1];
                let colors = [last.r, last.d, last.m];
                let redCount = colors.filter(c => c === 'Đỏ').length;
                let blueCount = colors.filter(c => c === 'Xanh').length;

                let prediction = "";
                let prob = Math.floor(Math.random() * (95 - 75 + 1)) + 75; // Tỉ lệ từ 75% - 95%
                let color = "";

                // Thuật toán dựa trên màu sắc chiếm ưu thế của cầu phụ
                if (redCount > blueCount) {
                    prediction = "BANKER (B)";
                    color = "#ff0000";
                } else if (blueCount > redCount) {
                    prediction = "PLAYER (P)";
                    color = "#0044ff";
                } else {
                    prediction = Math.random() > 0.5 ? "BANKER (B)" : "PLAYER (P)";
                    color = prediction === "BANKER (B)" ? "#ff0000" : "#0044ff";
                    prob = Math.floor(Math.random() * (65 - 50 + 1)) + 50;
                }

                const resDiv = document.getElementById('prediction-result');
                resDiv.innerText = prediction;
                resDiv.style.color = color;
                resDiv.style.textShadow = 0 0 20px ${color};
                
                document.getElementById('confidence-level').innerText = Độ tin cậy: ${prob}%;
                document.getElementById('status').innerText = "Trạng thái: Đã phân tích xong.";
            }, 500);
        }

        function resetData() {
            history = [];
            document.getElementById('history').innerText = "Lịch sử: ";
            document.getElementById('prediction-result').innerText = "CHỜ DỮ LIỆU...";
            document.getElementById('confidence-level').innerText = "Độ tin cậy: 0%";
        }
    </script>
</body>
</html>
