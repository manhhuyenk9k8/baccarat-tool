<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>HUYMANH</title>
<style>
body{background:#111;color:#fff;font-family:Arial;text-align:center}
input{width:300px;height:40px;font-size:20px;text-align:center}
button{padding:10px 25px;font-size:18px;margin-top:15px}
.result{margin-top:25px;font-size:80px;font-weight:bold}
.coin{margin-top:15px;font-size:20px;color:#0f0}
</style>
</head>

<body>

<h1>HUYMANH</h1>

<div class="coin">
Xu còn lại: <span id="coin">0</span>
</div>

<input id="input" placeholder="ABCD"><br>
<button onclick="calc()">XEM KẾT QUẢ (-5 xu)</button>

<div class="result" id="out"></div>

<script>
// ==== CẤU HÌNH ====
const START_COIN = 100;
const COST = 5;
const COIN_KEY = "huymanh_coin";

// ==== KHỞI TẠO XU ====
if(localStorage.getItem(COIN_KEY) === null){
  localStorage.setItem(COIN_KEY, START_COIN);
}

function updateCoin(){
  document.getElementById("coin").innerText =
    localStorage.getItem(COIN_KEY);
}
updateCoin();

function calc(){
  let coin = parseInt(localStorage.getItem(COIN_KEY));

  if(coin < COST){
    alert("Hết xu!");
    return;
  }

  let map = {A:1, B:2, C:3, D:4};

  let arr = document.getElementById("input").value
    .toUpperCase()
    .replace(/[^ABCD]/g,"")
    .split("");

  if(arr.length === 0){
    alert("Nhập ABCD");
    return;
  }

  // Trừ xu
  coin -= COST;
  localStorage.setItem(COIN_KEY, coin);
  updateCoin();

  let sum = 0;
  arr.forEach(x => sum += map[x]);

  let result = (sum % 2 === 0) ? "P" : "B";
  document.getElementById("out").innerText = result;
}
</script>

</body>
</html>
